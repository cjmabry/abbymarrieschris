<!DOCTYPE html>
<html lang="en" class="full-height">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Abby Marries Chris</title>
    <link rel="stylesheet" href="styles/main.css">
    <!-- <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script> -->
    <!-- <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' /> -->
</head>

<body>
    <div class="container display-flex">
        <div class="row">
            <div class="col-centered col-5 info-pane text-center">
                <div class="logo-wrapper">
                    <img class="logo padding-top-large" src="/assets/logo.svg"
                        alt="Abby and Chris are getting married!">

                    <div class="info-wrapper mobile-hide">
                        <div class="row">
                            <div class="col-12">
                                <div class="details-wrapper">
                                    <h2>
                                        September 16, 2023 <br>
                                        <span class="subheading">at 5pm</span>
                                    </h2> <br>

                                    <a href="https://goo.gl/maps/MChBSeecQtTxUCMq8">
                                        <h2>
                                            615 Buck Mountain Trail <br>
                                            <span class="subheading">Cookeville, Tennessee 38506</span>
                                        </h2>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 buttons-wrapper mobile-hide">
                        <a href="/" class="button button-primary full-width">Home</a>

                        <a href="https://www.zola.com/registry/abbyandchrisseptember16" class="button button-primary"
                            target="_blank">Registry</a>

                        <a href="/info" class="button button-primary">Info</a>
                    </div>
                </div>
            </div>

            <div class="col-7 form-wrapper">

                <form id="my-form" action="https://formspree.io/f/xnqyewdg" method="POST">
                    <div class="form-fields">
                <!-- TODO: SVG elements above and below -->
                <div class="text-center margin-bottom-medium">
                    <h1>RSVP</h1>
                    <h2 class="boldfinger">Are you in?</h2>
                </div>
                    <fieldset class="field-group">
                        <label>Your Name:</label>
                        <input type="text" name="name" class="form-control" placeholder="Adam Maitland" required />
                    </fieldset>

                    <fieldset class="field-group" required>
                        <legend>Will you be joining us?</legend>

                        <div>
                            <input type="radio" name="rsvp" value="yes" checked>
                            <label for="yes">Totally <span class="subtext">(Yes)</span></label>
                        </div>

                        <div>
                            <input type="radio" name="rsvp" value="no">
                            <label for="no">Bummer <span class="subtext">(No)</span></label>
                        </div>
                    </fieldset>

                    <fieldset class="field-group">
                        <label for="party_size">How many people are in your party?</label>

                        <select name="party_size" id="party_size" class="form-control" required>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </fieldset>

                    <fieldset class="field-group">
                        <label>Guest Names:</label>
                        <p class="small">List each guest who will be attending.</p>
                        <input type="text" name="name" class="form-control" placeholder="Adam and Barabara Maitland" required />

                        <p class="notice">Due to limited seating, we have reserved a seat for each person addressed on the envelope of your
                            invitation. <strong>Please do not RSVP additional guests.</strong></p>
                    </fieldset>

                    <!-- <p>Leave your preferred method of contact in case we need to get in touch!</p>
                    <label>Phone:</label>
                    <input type="tel" id="phone" class="form-control" name="phone">
                    <label>Email:</label>
                    <input type="email" name="email" class="form-control" /> -->

                    <label>Anything you want to share with Abby and Chris?</label>
                    <textarea type="text" name="message" rows="5" class="form-control" placeholder="Ooh la la. What do we got here? The Maitlands, uh? Cute couple. Look nice and stupid, too."></textarea>
                    <button id="my-form-button" class="button button-primary full-width">Submit</button>
                    <input type="text" name="_gotcha" style="display:none" />
                    </div>
                
                    <div class="form-message">
                        <div class="text-center margin-bottom-medium">
                            <h1>Thanks!</h1>
                            <h2 class="boldfinger">We can't wait to celebrate with you.</h2>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts! -->
    <script>
        var form = document.getElementById("my-form");

        async function handleSubmit(event) {
            event.preventDefault();
            var status = document.getElementById("my-form-status");
            var data = new FormData(event.target);
            fetch(event.target.action, {
                method: form.method,
                body: data,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    // hide form
                    form.classList.add("success");
                    // show success
                    status.innerHTML = "Thanks for your submission!";
                    form.reset()
                } else {
                    response.json().then(data => {
                        if (Object.hasOwn(data, 'errors')) {
                            status.innerHTML = data["errors"].map(error => error["message"]).join(", ")
                        } else {
                            status.innerHTML = "Oops! There was a problem submitting your form"
                        }
                    })
                }
            }).catch(error => {
                status.innerHTML = "Oops! There was a problem submitting your form"
            });
        }
        form.addEventListener("submit", handleSubmit)
    </script>
    <script src="scripts/main.js"></script>
</body>

</html>